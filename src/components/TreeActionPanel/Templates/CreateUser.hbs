// TODO: We will need a json helper for the customData field
db.getSiblingDB("{{Database}}").createUser({ 
   user: "{{UserName}}",
   pwd: "{{Password}}", {{#if CustomData}} customData :  {{json CustomData}} , {{/if}}
     roles: [ {{#each Roles}} 
             {role:"{{Role}}", db: "{{Database}}" } {{#unless last}},{{/unless}}    {{/each}}
            ]              
    },          
    {  w: "majority" }
);

db.getSiblingDB("admin").system.users.find({user:"{{UserName}}"}).pretty(); 

